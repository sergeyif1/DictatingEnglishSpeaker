/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";document.addEventListener("keydown",function(e){"Enter"===e.key&&e.preventDefault()});document.addEventListener("keydown",function(e){"Enter"===e.key&&e.preventDefault()});var e=document.getElementById("voiceSelect"),t=window.speechSynthesis,n={getUtterance:function(n,r,o){var i=document.getElementById("speed").value,u=document.getElementById("pitch").value,c=t.getVoices(),a=null;if(console.log("🎯 Параметры getUtterance:",{text:n,language:r,currentButton1:o}),r&&"but1"===o){var l={En:["английский Соединенные Штаты (en-US)","(en-US)",/[^"]*\(en-US\)/,"Google US English (en-US)"],Pl:["польский Польша (pl-PL)","(pl-PL)",/[^"]*\(pl-PL\)/,"Google polski (pl-PL)"],Gr:["греческий Греция (el-GR)","(el-GR)",/[^"]*\(el-GR\)/,"Greek (el-GR)"],Du:["немецкий Германия (de-DE)","(de-DE)",/[^"]*\(de-DE\)/,"Google Deutsch (de-DE)"]}[r]||[];if(!(a=c.find(function(e){return l.some(function(t){var n="".concat(e.name||""," (").concat(e.lang||"",")");return"[object RegExp]"===Object.prototype.toString.call(t)?t.test(n)||t.test(e.name)||t.test(e.lang):"string"==typeof t&&(e.name&&e.name.includes(t)||e.lang&&e.lang===t||n===t)})}))){var s={En:["en-US","en-GB","en"],Pl:["pl-PL","pl"],Gr:["el-GR","el"],Du:["de-DE","de"]}[r]||[];a=c.find(function(e){return s.some(function(t){var n,r=(null===(n=e.lang)||void 0===n?void 0:n.toLowerCase())||"",o="".concat(e.name||""," (").concat(e.lang||"",")").toLowerCase();return r===t.toLowerCase()||r.startsWith(t.toLowerCase())||o.includes(t.toLowerCase())})})}a?console.log("🗣️ Автоматический выбор голоса для языка ".concat(r,": ").concat(a.name," (").concat(a.lang,")")):console.warn("⚠️ Голос не найден для языка ".concat(r))}if(!a&&r&&"but2"===o){var f=["Google русский (ru-RU)","русский Россия (ru-RU)","(ru-RU)","ru-RU"];(a=c.find(function(e){return f.some(function(t){var n="".concat(e.name||""," (").concat(e.lang||"",")");return"[object RegExp]"===Object.prototype.toString.call(t)?t.test(n)||t.test(e.name)||t.test(e.lang):"string"==typeof t&&(e.name&&e.name.includes(t)||e.lang&&e.lang===t||n===t)})}))?console.log("🇷🇺 Используется единый русский голос: ".concat(a.name," (").concat(a.lang,")")):console.warn("⚠️ Не найден русский голос для режима but2")}if(!a){var p=e.value;(a=c.find(function(e){return e.name===p}))?console.log("🔁 Fallback: выбран голос из UI — ".concat(a.name," (").concat(a.lang,")")):c.length>0?(a=c[0],console.warn("⚠️ Используется первый доступный голос: ".concat(a.name," (").concat(a.lang,")"))):console.error("❌ Нет доступных голосов в системе!")}var d=new SpeechSynthesisUtterance(n);return d.voice=a,d.lang=a.lang,d.volume=1,d.rate=i,d.pitch=u,console.log("✅ Итоговый выбор: ".concat(d.voice.name," (").concat(d.lang,")")),d}};e.addEventListener("change",function(){e.value});const r=n;var o=function(e){if(e){var t=function(e){return[].slice.call(e)},n=3,r=[],o=null,i="requestAnimationFrame"in e?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1};e.cancelAnimationFrame(o);var n=function(){return c(r.filter(function(e){return e.dirty&&e.active}))};if(t.sync)return n();o=e.requestAnimationFrame(n)}:function(){},u=function(e){return function(t){r.forEach(function(t){return t.dirty=e}),i(t)}},c=function(e){e.filter(function(e){return!e.styleComputed}).forEach(function(e){e.styleComputed=f(e)}),e.filter(p).forEach(d);var t=e.filter(s);t.forEach(l),t.forEach(function(e){d(e),a(e)}),t.forEach(v)},a=function(e){return e.dirty=0},l=function(e){e.availableWidth=e.element.parentNode.clientWidth,e.currentWidth=e.element.scrollWidth,e.previousFontSize=e.currentFontSize,e.currentFontSize=Math.min(Math.max(e.minSize,e.availableWidth/e.currentWidth*e.previousFontSize),e.maxSize),e.whiteSpace=e.multiLine&&e.currentFontSize===e.minSize?"normal":"nowrap"},s=function(e){return 2!==e.dirty||2===e.dirty&&e.element.parentNode.clientWidth!==e.availableWidth},f=function(t){var n=e.getComputedStyle(t.element,null);return t.currentFontSize=parseFloat(n.getPropertyValue("font-size")),t.display=n.getPropertyValue("display"),t.whiteSpace=n.getPropertyValue("white-space"),!0},p=function(e){var t=!1;return!e.preStyleTestCompleted&&(/inline-/.test(e.display)||(t=!0,e.display="inline-block"),"nowrap"!==e.whiteSpace&&(t=!0,e.whiteSpace="nowrap"),e.preStyleTestCompleted=!0,t)},d=function(e){e.element.style.whiteSpace=e.whiteSpace,e.element.style.display=e.display,e.element.style.fontSize=e.currentFontSize+"px"},v=function(e){e.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:e.previousFontSize,newValue:e.currentFontSize,scaleFactor:e.currentFontSize/e.previousFontSize}}))},h=function(e,t){return function(n){e.dirty=t,e.active&&i(n)}},y=function(e){return function(){r=r.filter(function(t){return t.element!==e.element}),e.observeMutations&&e.observer.disconnect(),e.element.style.whiteSpace=e.originalStyle.whiteSpace,e.element.style.display=e.originalStyle.display,e.element.style.fontSize=e.originalStyle.fontSize}},b=function(e){return function(){e.active||(e.active=!0,i())}},m=function(e){return function(){return e.active=!1}},w=function(e){e.observeMutations&&(e.observer=new MutationObserver(h(e,1)),e.observer.observe(e.element,e.observeMutations))},g={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in e&&{subtree:!0,childList:!0,characterData:!0}},S=null,x=function(){e.clearTimeout(S),S=e.setTimeout(u(2),_.observeWindowDelay)},E=["resize","orientationchange"];return Object.defineProperty(_,"observeWindow",{set:function(t){var n="".concat(t?"add":"remove","EventListener");E.forEach(function(t){e[n](t,x)})}}),_.observeWindow=!0,_.observeWindowDelay=100,_.fitAll=u(n),_}function k(e,t){var o=Object.assign({},g,t),u=e.map(function(e){var t=Object.assign({},o,{element:e,active:!0});return function(e){e.originalStyle={whiteSpace:e.element.style.whiteSpace,display:e.element.style.display,fontSize:e.element.style.fontSize},w(e),e.newbie=!0,e.dirty=!0,r.push(e)}(t),{element:e,fit:h(t,n),unfreeze:b(t),freeze:m(t),unsubscribe:y(t)}});return i(),u}function _(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e?k(t(document.querySelectorAll(e)),n):k([e],n)[0]}}("undefined"==typeof window?null:window);const i=o;function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(){var e=d(),t=e.m(c),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var o={throw:1,return:2,break:3,continue:3};function i(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,o[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,a(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(c=function(){return{wrap:function(t,n,r,o){return e.w(i(t),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new h(e,t)},AsyncIterator:p,async:function(e,t,n,o,u){return(r(t)?f:s)(i(e),t,n,o,u)},keys:l,values:a}})()}function a(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(u(e)+" is not iterable")}function l(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function s(e,t,n,r,o){var i=f(e,t,n,r,o);return i.next().then(function(e){return e.done?e.value:i.next()})}function f(e,t,n,r,o){return new p(d().w(e,t,n,r),o||Promise)}function p(e,t){function n(r,o,i,u){try{var c=e[r](o),a=c.value;return a instanceof h?t.resolve(a.v).then(function(e){n("next",e,i,u)},function(e){n("throw",e,i,u)}):t.resolve(a).then(function(e){c.value=e,i(c)},function(e){return n("throw",e,i,u)})}catch(e){u(e)}}var r;this.next||(v(p.prototype),v(p.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),v(this,"_invoke",function(e,o,i){function u(){return new t(function(t,r){n(e,i,t,r)})}return r=r?r.then(u,u):u()},!0)}function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var a=r&&r.prototype instanceof c?r:c,l=Object.create(a.prototype);return v(l,"_invoke",function(n,r,o){var i,c,a,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,c=0,a=e,p.n=n,u}};function d(n,r){for(c=n,a=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,i=s[t],d=p.p,v=i[2];n>3?(o=v===r)&&(a=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return u;throw f=!0,r}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),c=s,a=v;(t=c<2?e:a)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,a)):p.n=a:p.v=a);try{if(l=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=p.n<0)?a:n.call(r,p))!==u)break}catch(t){i=e,c=1,a=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}var u={};function c(){}function a(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(v(t={},r,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,v(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return a.prototype=l,v(f,"constructor",l),v(l,"constructor",a),a.displayName="GeneratorFunction",v(l,o,"GeneratorFunction"),v(f),v(f,o,"Generator"),v(f,r,function(){return this}),v(f,"toString",function(){return"[object Generator]"}),(d=function(){return{w:i,m:p}})()}function v(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}v=function(e,t,n,r){function i(t,n){v(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},v(e,t,n,r)}function h(e,t){this.v=e,this.k=t}function y(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function b(e,t,n,r){var o=document.getElementById("text3");if(o){var i=function(e){var t=document.createElement("td");return t.textContent=e,t.style.border="1px solid black",t.style.padding="4px",t},u=document.createElement("tr");u.appendChild(i(e)),u.appendChild(i(t)),u.appendChild(i("".concat(n," [").concat(r,"]"))),o.insertBefore(u,o.firstChild)}}function m(){var e;return e=c().mark(function e(t){var n,o,u,a,l,s,f,p,d,v;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d=function(e){return e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight},n=mt(),o=JSON.parse(t),u=o.id,a=o.name,l=o.title,s=o.subscrb,f=o.language,"but1"===n?(p="".concat(a),b(u,a,l,s)):"but2"===n&&(p="".concat(l),b(u,l,a,s)),document.querySelectorAll("textarea").forEach(function(e){d(e)?i(e,{minSize:20,maxSize:30}):e.style.fontSize="30px"}),document.getElementById("text1").value="".concat(u," - ").concat(a),document.getElementById("text2").value="".concat(u," - ").concat(l),document.cookie="id=".concat(u,"; path=/"),v=r.getUtterance(p,f,n),speechSynthesis.paused?(console.log("🔈 Возобновляем озвучку..."),window.speechSynthesis.resume()):(console.log("🔈 Новая озвучка..."),window.speechSynthesis.cancel(),window.speechSynthesis.speak(v));case 11:case"end":return e.stop()}},e)}),m=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){y(i,r,o,u,c,"next",e)}function c(e){y(i,r,o,u,c,"throw",e)}u(void 0)})},m.apply(this,arguments)}const w=function(e){return m.apply(this,arguments)},g=function(e,t){var n=document.getElementById("countdown"),r=document.querySelector(".progress-ring__circle"),o=document.querySelector(".progress-ring__dot"),i=r.r.baseVal.value,u=2*Math.PI*i;r.style.strokeDasharray="".concat(u," ").concat(u),r.style.strokeDashoffset=u;var c=setInterval(function(){n.textContent=function(e){var t=Math.floor(e/60),n=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))}(e),function(e){var t=u-e/100*u;r.style.strokeDashoffset=t;var n=360*e/100*(Math.PI/180),c=60+i*Math.cos(n-Math.PI/2),a=60+i*Math.sin(n-Math.PI/2);o.setAttribute("cx",c),o.setAttribute("cy",a)}(e/t*100),e<=0&&(clearInterval(c),n.textContent="Время истекло!"),e--},1e3)};function S(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var E=document.getElementById("select2"),k=document.querySelectorAll(".form-language .checkboxL"),_=null,O=[],P={"English dictionary":{code:"En",url:"/dbEn.json"},"Deutsch Wörterbuch":{code:"De",url:"/dbDeu.json"},"Griechικό λεξικό":{code:"Gr",url:"/dbGr.json"},"Plskie słownictwo":{code:"Pl",url:"/dbPl.json"}},I={1:"En",2:"Pl",3:"Gr",4:"De"};function j(){O=Array.from(k).filter(function(e){return e.checked}).map(function(e){return Object.values(P).find(function(t){return t.code===I[e.value]})}).filter(Boolean),T()}function A(){var e=[].concat(S(_?[_]:[]),S(O)).map(function(e){return e.url}).filter(Boolean);return e.length>0?e:void 0}function T(){var e=A();e?console.log("📘 Текущий результат (массив URL’ов):",e):console.log("⚠️ Нет выбранных словарей и языков")}function z(e){var t=e(function(e){Error.call(e),e.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}console.log("🧩 seleDictionary:",E),console.log("🧩 checkboxes:",k),E.addEventListener("change",function(e){var t=e.target.value;_=P[t]||null,T()}),k.forEach(function(e){return e.addEventListener("change",j)});var N=z(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function G(e,t){var n="object"==typeof t;return new Promise(function(r,o){var i,u=!1;e.subscribe({next:function(e){i=e,u=!0},error:o,complete:function(){u?r(i):n?r(t.defaultValue):o(new N)}})})}var C=function(e,t){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},C(e,t)};function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function L(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,r=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){u=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){u.label=c[1];break}if(6===c[0]&&u.label<o[1]){u.label=o[1],o=c;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(c);break}o[2]&&u.ops.pop(),u.trys.pop();continue}c=t.call(e,u)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}function D(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function M(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function q(e){return this instanceof q?(this.v=e,this):new q(e)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var B=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function W(e){return"function"==typeof e}function R(e){return W(null==e?void 0:e.then)}var V=z(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function Y(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var H=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var u=D(i),c=u.next();!c.done;c=u.next())c.value.remove(this)}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else i.remove(this);var a=this.initialTeardown;if(W(a))try{a()}catch(e){o=e instanceof V?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var s=D(l),f=s.next();!f.done;f=s.next()){var p=f.value;try{K(p)}catch(e){o=null!=o?o:[],e instanceof V?o=M(M([],U(o)),U(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}if(o)throw new V(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)K(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Y(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Y(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),J=H.EMPTY;function $(e){return e instanceof H||e&&"closed"in e&&W(e.remove)&&W(e.add)&&W(e.unsubscribe)}function K(e){W(e)?e():e.unsubscribe()}var Q=null,X=null,Z=void 0,ee=!1,te=!1,ne={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=ne.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,M([e,t],U(n))):setTimeout.apply(void 0,M([e,t],U(n)))},clearTimeout:function(e){var t=ne.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function re(e){ne.setTimeout(function(){if(!Q)throw e;Q(e)})}function oe(){}var ie=ue("C",void 0,void 0);function ue(e,t,n){return{kind:e,value:t,error:n}}var ce=null;function ae(e){if(ee){var t=!ce;if(t&&(ce={errorThrown:!1,error:null}),e(),t){var n=ce,r=n.errorThrown,o=n.error;if(ce=null,r)throw o}}else e()}var le=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,$(t)&&t.add(n)):n.destination=ye,n}return F(t,e),t.create=function(e,t,n){return new de(e,t,n)},t.prototype.next=function(e){this.isStopped?he(function(e){return ue("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?he(ue("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?he(ie,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(H),se=Function.prototype.bind;function fe(e,t){return se.call(e,t)}var pe=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ve(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ve(e)}else ve(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ve(e)}},e}(),de=function(e){function t(t,n,r){var o,i,u=e.call(this)||this;return W(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:u&&te?((i=Object.create(t)).unsubscribe=function(){return u.unsubscribe()},o={next:t.next&&fe(t.next,i),error:t.error&&fe(t.error,i),complete:t.complete&&fe(t.complete,i)}):o=t,u.destination=new pe(o),u}return F(t,e),t}(le);function ve(e){var t;ee?(t=e,ee&&ce&&(ce.errorThrown=!0,ce.error=t)):re(e)}function he(e,t){var n=X;n&&ne.setTimeout(function(){return n(e,t)})}var ye={closed:!0,next:oe,error:function(e){throw e},complete:oe},be="function"==typeof Symbol&&Symbol.observable||"@@observable";function me(e){return e}var we=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,i=(r=e)&&r instanceof le||function(e){return e&&W(e.next)&&W(e.error)&&W(e.complete)}(r)&&$(r)?e:new de(e,t,n);return ae(function(){var e=o,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=ge(t))(function(t,r){var o=new de({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[be]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(n=e).length?me:1===n.length?n[0]:function(e){return n.reduce(function(e,t){return t(e)},e)})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=ge(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function ge(e){var t;return null!==(t=null!=e?e:Z)&&void 0!==t?t:Promise}function Se(e){return W(e[be])}function xe(e){return Symbol.asyncIterator&&W(null==e?void 0:e[Symbol.asyncIterator])}function Ee(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ke="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function _e(e){return W(null==e?void 0:e[ke])}function Oe(e){return function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},u("next"),u("throw"),u("return",function(e){return function(t){return Promise.resolve(t).then(e,l)}}),r[Symbol.asyncIterator]=function(){return this},r;function u(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||c(e,t)})},t&&(r[e]=t(r[e])))}function c(e,t){try{(n=o[e](t)).value instanceof q?Promise.resolve(n.value.v).then(a,l):s(i[0][2],n)}catch(e){s(i[0][3],e)}var n}function a(e){c("next",e)}function l(e){c("throw",e)}function s(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function(){var t,n,r;return L(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,q(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,q(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,q(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Pe(e){return W(null==e?void 0:e.getReader)}function Ie(e){if(e instanceof we)return e;if(null!=e){if(Se(e))return o=e,new we(function(e){var t=o[be]();if(W(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(B(e))return r=e,new we(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()});if(R(e))return n=e,new we(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,re)});if(xe(e))return je(e);if(_e(e))return t=e,new we(function(e){var n,r;try{for(var o=D(t),i=o.next();!i.done;i=o.next()){var u=i.value;if(e.next(u),e.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()});if(Pe(e))return je(Oe(e))}var t,n,r,o;throw Ee(e)}function je(e){return new we(function(t){(function(e,t){var n,r,o,i,u,c,a,l;return u=this,c=void 0,l=function(){var u,c;return L(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=D(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,o,(t=e[n](t)).done,t.value)})}}}(e),a.label=1;case 1:return[4,n.next()];case 2:if((r=a.sent()).done)return[3,4];if(u=r.value,t.next(u),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=a.sent(),o={error:c},[3,11];case 6:return a.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new((a=void 0)||(a=Promise))(function(e,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a(function(e){e(o)})).then(n,r)}o((l=l.apply(u,c||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function Ae(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function Te(e){return function(t){if(function(e){return W(null==e?void 0:e.lift)}(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw new TypeError("Unable to lift unknown Observable type")}}function ze(e,t,n,r,o){return new Ne(e,t,n,r,o)}var Ne=function(e){function t(t,n,r,o,i,u){var c=e.call(this,t)||this;return c.onFinalize=i,c.shouldUnsubscribe=u,c._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,c._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,c}return F(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(le);function Ge(e,t){return void 0===t&&(t=0),Te(function(n,r){n.subscribe(ze(r,function(n){return Ae(r,e,function(){return r.next(n)},t)},function(){return Ae(r,e,function(){return r.complete()},t)},function(n){return Ae(r,e,function(){return r.error(n)},t)}))})}function Ce(e,t){return void 0===t&&(t=0),Te(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Fe(e,t){if(!e)throw new Error("Iterable cannot be null");return new we(function(n){Ae(n,t,function(){var r=e[Symbol.asyncIterator]();Ae(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function Le(e,t){return t?function(e,t){if(null!=e){if(Se(e))return function(e,t){return Ie(e).pipe(Ce(t),Ge(t))}(e,t);if(B(e))return function(e,t){return new we(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(R(e))return function(e,t){return Ie(e).pipe(Ce(t),Ge(t))}(e,t);if(xe(e))return Fe(e,t);if(_e(e))return function(e,t){return new we(function(n){var r;return Ae(n,t,function(){r=e[ke](),Ae(n,t,function(){var e,t,o;try{t=(e=r.next()).value,o=e.done}catch(e){return void n.error(e)}o?n.complete():n.next(t)},0,!0)}),function(){return W(null==r?void 0:r.return)&&r.return()}})}(e,t);if(Pe(e))return function(e,t){return Fe(Oe(e),t)}(e,t)}throw Ee(e)}(e,t):Ie(e)}var De=z(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ue=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return F(t,e),t.prototype.lift=function(e){var t=new Me(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new De},t.prototype.next=function(e){var t=this;ae(function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=D(t.currentObservers),i=o.next();!i.done;i=o.next())i.value.next(e)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var t=this;ae(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;ae(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,i=n.observers;return r||o?J:(this.currentObservers=null,i.push(e),new H(function(){t.currentObservers=null,Y(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new we;return e.source=this,e},t.create=function(e,t){return new Me(e,t)},t}(we),Me=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return F(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:J},t}(Ue);function qe(e,t,n,r){return Te(function(o,i){var u;t&&"function"!=typeof t?(n=t.duration,u=t.element,r=t.connector):u=t;var c=new Map,a=function(e){c.forEach(e),e(i)},l=function(e){return a(function(t){return t.error(e)})},s=0,f=!1,p=new Ne(i,function(t){try{var o=e(t),a=c.get(o);if(!a){c.set(o,a=r?r():new Ue);var d=(h=o,y=a,(b=new we(function(e){s++;var t=y.subscribe(e);return function(){t.unsubscribe(),0===--s&&f&&p.unsubscribe()}})).key=h,b);if(i.next(d),n){var v=ze(a,function(){a.complete(),null==v||v.unsubscribe()},void 0,void 0,function(){return c.delete(o)});p.add(Ie(n(d)).subscribe(v))}}a.next(u?u(t):t)}catch(e){l(e)}var h,y,b},function(){return a(function(e){return e.complete()})},l,function(){return c.clear()},function(){return f=!0,0===s});o.subscribe(p)})}function Be(e,t,n){return void 0===n&&(n=1/0),W(t)?Be(function(n,r){return function(e){return Te(function(t,n){var r=0;t.subscribe(ze(n,function(t){n.next(e.call(undefined,t,r++))}))})}(function(e,o){return t(n,e,r,o)})(Ie(e(n,r)))},n):("number"==typeof t&&(n=t),Te(function(t,r){return function(e,t,n,r){var o=[],i=0,u=0,c=!1,a=function(){!c||o.length||i||t.complete()},l=function(e){return i<r?s(e):o.push(e)},s=function(e){i++;var c=!1;Ie(n(e,u++)).subscribe(ze(t,function(e){t.next(e)},function(){c=!0},void 0,function(){if(c)try{i--;for(var e=function(){var e=o.shift();s(e)};o.length&&i<r;)e();a()}catch(e){t.error(e)}}))};return e.subscribe(ze(t,l,function(){c=!0,a()})),function(){}}(t,r,e,n)}))}var We=function(e,t){return e.push(t),e};function Re(){return Te(function(e,t){(function(e,t){return Te(function(e,t,n){return function(r,o){var i=n,u=t,c=0;r.subscribe(ze(o,function(t){var n=c++;u=i?e(u,t,n):(i=!0,t)},function(){i&&o.next(u),o.complete()}))}}(e,t,arguments.length>=2))})(We,[])(e).subscribe(t)})}function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ye(){var e=Xe(),t=e.m(Ye),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var o={throw:1,return:2,break:3,continue:3};function i(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,o[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,He(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(Ye=function(){return{wrap:function(t,n,r,o){return e.w(i(t),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new et(e,t)},AsyncIterator:Qe,async:function(e,t,n,o,u){return(r(t)?Ke:$e)(i(e),t,n,o,u)},keys:Je,values:He}})()}function He(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(Ve(e)+" is not iterable")}function Je(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function $e(e,t,n,r,o){var i=Ke(e,t,n,r,o);return i.next().then(function(e){return e.done?e.value:i.next()})}function Ke(e,t,n,r,o){return new Qe(Xe().w(e,t,n,r),o||Promise)}function Qe(e,t){function n(r,o,i,u){try{var c=e[r](o),a=c.value;return a instanceof et?t.resolve(a.v).then(function(e){n("next",e,i,u)},function(e){n("throw",e,i,u)}):t.resolve(a).then(function(e){c.value=e,i(c)},function(e){return n("throw",e,i,u)})}catch(e){u(e)}}var r;this.next||(Ze(Qe.prototype),Ze(Qe.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Ze(this,"_invoke",function(e,o,i){function u(){return new t(function(t,r){n(e,i,t,r)})}return r=r?r.then(u,u):u()},!0)}function Xe(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var a=r&&r.prototype instanceof c?r:c,l=Object.create(a.prototype);return Ze(l,"_invoke",function(n,r,o){var i,c,a,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,c=0,a=e,p.n=n,u}};function d(n,r){for(c=n,a=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,i=s[t],d=p.p,v=i[2];n>3?(o=v===r)&&(a=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return u;throw f=!0,r}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),c=s,a=v;(t=c<2?e:a)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,a)):p.n=a:p.v=a);try{if(l=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=p.n<0)?a:n.call(r,p))!==u)break}catch(t){i=e,c=1,a=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}var u={};function c(){}function a(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Ze(t={},r,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Ze(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return a.prototype=l,Ze(f,"constructor",l),Ze(l,"constructor",a),a.displayName="GeneratorFunction",Ze(l,o,"GeneratorFunction"),Ze(f),Ze(f,o,"Generator"),Ze(f,r,function(){return this}),Ze(f,"toString",function(){return"[object Generator]"}),(Xe=function(){return{w:i,m:p}})()}function Ze(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Ze=function(e,t,n,r){function i(t,n){Ze(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},Ze(e,t,n,r)}function et(e,t){this.v=e,this.k=t}function tt(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function rt(e,t){if(e){if("string"==typeof e)return ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function it(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}var ut,ct,at=!1,lt=!1,st=null,ft=null,pt={useCountNWord:function(e){ft=e,console.log("Count N Word set to:",ft)},setID:function(e){st=e,console.log("Current ID set to:",st)},words:(ut=Ye().mark(function e(){var t,n,r,o,i,u,c,a,l,s,f,p,d,v,h,y,b,m,S,x,E,k,_,O;return Ye().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof window){e.next=2;break}return e.abrupt("return");case 2:if(!lt){e.next=5;break}return console.warn("⚠️ Процесс уже запущен. Дублировать запуск нельзя."),e.abrupt("return");case 5:lt=!0,console.log("🌐 Запуск обработки (words) в браузере..."),e.prev=7,t=A(),console.log("📥 Результат getRequestAdd():",t),n=Array.isArray(t)?t:[t],console.log("📂 Итоговый список файлов:",n),r=1e3*Number(document.querySelector("#gap").value),o=[],i=nt(n),e.prev=15,i.s();case 17:if((u=i.n()).done){e.next=48;break}if(c=u.value){e.next=21;break}return e.abrupt("continue",46);case 21:return console.log("📄 Обработка файла: ".concat(c)),e.next=24,fetch(c);case 24:if((a=e.sent).ok){e.next=28;break}return console.warn("⚠️ Не удалось загрузить файл: ".concat(c)),e.abrupt("continue",46);case 28:return e.next=30,a.text();case 30:if(l=e.sent,s=JSON.parse(l),f=[],!Array.isArray(s)){e.next=37;break}f=s,e.next=43;break;case 37:if(!Array.isArray(s.dictionary)){e.next=41;break}f=s.dictionary,e.next=43;break;case 41:return console.warn("⚠️ Неизвестный формат JSON:",s),e.abrupt("continue",46);case 43:p=st?f.filter(function(e){var t=Number(e.id);return t>=Number(st)&&t<=Number(st)+Number(ft)-1}):f.slice(0,ft),console.log("🔍 Найдено ".concat(p.length," записей в ").concat(c)),o.push.apply(o,tt(p));case 46:e.next=17;break;case 48:e.next=53;break;case 50:e.prev=50,e.t0=e.catch(15),i.e(e.t0);case 53:return e.prev=53,i.f(),e.finish(53);case 56:if(0!==o.length){e.next=59;break}return console.log("❌ Нет данных для обработки."),e.abrupt("return");case 59:return e.next=61,G(Le(o).pipe(qe(function(e){return e.id}),Be(function(e){return e.pipe(Re())}),Re()));case 61:d=e.sent,console.log("✅ Группированные данные по ID:"),console.log(d),console.log("✅ Начинаем поочерёдную обработку сгруппированных записей..."),v=Number(st),h=v+Number(ft)-1,y=nt(d),e.prev=68,y.s();case 70:if((b=y.n()).done){e.next=105;break}if(S=b.value,!((x=Number(null===(m=S[0])||void 0===m?void 0:m.id))>h)){e.next=76;break}return console.log("⏹ Достигнут конец диапазона ID (".concat(x," > ").concat(h,"). Останавливаем обработку.")),e.abrupt("break",105);case 76:E=nt(S),e.prev=77,E.s();case 79:if((k=E.n()).done){e.next=95;break}_=k.value;case 81:if(!at){e.next=86;break}return e.next=84,new Promise(function(e){return setTimeout(e,100)});case 84:e.next=81;break;case 86:return g(O=r/1e3,O),console.log("▶️ Обработка ID=".concat(_.id," (").concat(_.name,")")),e.next=91,w(JSON.stringify(_));case 91:return e.next=93,new Promise(function(e){return setTimeout(e,r)});case 93:e.next=79;break;case 95:e.next=100;break;case 97:e.prev=97,e.t1=e.catch(77),E.e(e.t1);case 100:return e.prev=100,E.f(),e.finish(100);case 103:e.next=70;break;case 105:e.next=110;break;case 107:e.prev=107,e.t2=e.catch(68),y.e(e.t2);case 110:return e.prev=110,y.f(),e.finish(110);case 113:console.log("✅ Все записи из выбранного диапазона обработаны."),e.next=119;break;case 116:e.prev=116,e.t3=e.catch(7),console.error("❌ Ошибка при обработке:",e.t3);case 119:return e.prev=119,lt=!1,console.log("🏁 words() завершил выполнение."),e.finish(119);case 123:case"end":return e.stop()}},e,null,[[7,116,119,123],[15,50,53,56],[68,107,110,113],[77,97,100,103]])}),ct=function(){var e=this,t=arguments;return new Promise(function(n,r){var o=ut.apply(e,t);function i(e){it(o,n,r,i,u,"next",e)}function u(e){it(o,n,r,i,u,"throw",e)}i(void 0)})},function(){return ct.apply(this,arguments)}),pause:function(){at?console.log("⚠️ myModule: уже на паузе."):(at=!0,console.log("⏸️ myModule: флаг isPaused = true (обработка поставлена на паузу)."))},resume:function(){at?(at=!1,console.log("▶️ myModule: флаг isPaused = false (обработка возобновляется).")):console.log("⚠️ myModule: процесс не был на паузе.")},isPaused:function(){return!!at},isRunning:function(){return!!lt}};const dt=pt;var vt,ht=document.querySelectorAll(".form-point");const yt=function(){var e=document.querySelector(".form-pointN").value;document.querySelector('input[name="option3"]').checked||e||alert("Отметьте пожалуйста чекбокс, и поставьте нужное колличество слов!"),dt.useCountNWord(e)};var bt;document.addEventListener("keydown",function(e){"Enter"===e.key&&e.preventDefault()});var mt=function(){return bt};const wt=function(e){var t=e.target;if(bt=t.id,"play"===t.className){(function(){var e=document.querySelector('input[name="option1"]').checked,t=document.querySelector('input[name="option2"]').checked;if(e)vt=ht[0].value;else if(t){var n=document.cookie.split("; ").find(function(e){return e.startsWith("id=")});n&&(vt=n.split("=")[1])}vt&&dt.setID(vt)})(),yt(),dt.words(),document.activeElement.blur();var n=window.scrollY;setTimeout(function(){return window.scrollTo(0,n)},50);var r=document.querySelector("#gap");if(r){var o=Number(r.value);g(o,o)}}},gt=function(e){var t=e.target;switch(t.id,t.className){case"pause":e.preventDefault(),window.speechSynthesis.pause(),dt.pause();break;case"resume":e.preventDefault(),window.speechSynthesis.resume(),dt.resume()}};window.speechSynthesis.onvoiceschanged=function(){e.innerHTML="";var n=t.getVoices(),r=n.find(function(e){return"(en-US)"===e.lang||"(en-GB)"===e.lang});n.forEach(function(t){var n='<option value="'.concat(t.name,'">').concat(t.name," (").concat(t.lang,")</option>");e.insertAdjacentHTML("beforeend",n)});var o=n.find(function(e){return"Google US English"===e.name&&"en-US"===e.lang});o?e.value=o.name:r?e.value=r.name:console.log("Нет доступного голоса для выбора по умолчанию")};var St=document.getElementById("but1"),xt=document.getElementById("but2"),Et=document.getElementById("but3"),kt=document.getElementById("but5"),_t=document.getElementById("resumeButton");St.addEventListener("click",function(e){wt(e)}),xt.addEventListener("click",function(e){wt(e)}),kt.addEventListener("click",function(e){gt(e)}),_t.addEventListener("click",function(e){gt(e)}),Et.addEventListener("click",function(){setTimeout(function(){location.reload()},1e3)}),document.querySelectorAll(".checkbox").forEach(function(e){e.addEventListener("change",function(){var e=this;this.checked?document.querySelectorAll(".checkbox").forEach(function(t){t!==e&&(t.disabled=!0)}):document.querySelectorAll(".checkbox").forEach(function(e){e.disabled=!1})})}),window.addEventListener("load",function(){var e=document.querySelector('.checkbox[name="option1"]');e&&e.checked&&document.querySelectorAll(".checkbox").forEach(function(t){t!==e&&(t.disabled=!0)})})})();