<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8" />
  <title>Text To Speech in JavaScript</title>
  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
  <link rel="preload" href="https://fonts.gstatic.com/s/..." as="font" type="font/woff2" crossorigin />
  <link rel="stylesheet" href="style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
</head>

<body>
  <div class="wrapper">
    <header>Speaker in voice</header>
    <form action="#" method="GET">
      <div class="container-point-properties">

        <div class="switch-dashboard">
          <button class="toggle-ui-button" onclick="toggleUI()">select UI style</button>
        </div>

        <label>Select point of start</label>
        <div class="select-point">
          <div class="point" style="justify-content: space-between; font-size: 14px">
            <input class="checkbox" type="checkbox" name="option1" value="value1" checked />...free select<input
              class="form-point" value="1" style="width: 45%; font-size: 14px" />
          </div>
          <br />

          <div class="point" style="justify-content: space-between; font-size: 14px">
            <input class="checkbox" type="checkbox" name="option2" value="value2" />...place where you run out of
          </div>
          <br />

          <div class="point" style="justify-content: space-between; font-size: 14px">
            <input class="checkboxN" type="checkbox" name="option3" value="value3" checked />...Nwords count<input
              class="form-pointN" value="30" style="width: 45%; font-size: 14px" />
          </div>
        </div>
        <div class="form-properties">
          <div class="speed">
            <label form="speed">Rate (0.5-1.5)</label>
            <input id="speed" value="1" style="font-size: 14px" />
          </div>
          <div class="sec">
            <label form="gap">Set gap (sec)</label>
            <input id="gap" value="15" style="font-size: 14px" />
          </div>
          <div class="form-pitch">
            <label form="pitch">Voice of pitch (0.5-1.5)</label>
            <input id="pitch" value="1" style="font-size: 14px" />
          </div>
        </div>
        <div class="timer">
          <svg class="progress-ring" width="120" height="120">
            <circle class="progress-ring__circle" stroke="grey" stroke-width="4" fill="transparent" r="54" cx="60"
              cy="60" />
            <circle class="progress-ring__dot" fill="white" r="5" cx="60" cy="6" />
          </svg>
          <div id="countdown">00:00</div>
        </div>
      </div>
      <div class="row">
<div class="flex-container">
  <div class="flex-item">
    <label>Select Voice</label>
    <select id="voiceSelect"></select>
  </div>
  <div class="flex-item">
    <label>Constituents parts of speech</label>
    <select id="select2">
      <option selected disabled hidden>Search dictionary...</option>
      <option>Deutsch Wörterbuch</option>
      <option>Griechικό λεξικό</option>
      <option>English dictionary</option>
      <option>Polskie słownictwo</option>
    </select>
  </div>
</div>
        <label>Enter Text</label>
        <br>
        <div class="button">
          <button id="but1" class="play">( En|De|Gr|PL )-play</button>
          <button id="but2" class="play">( Ru )-play</button>
          <button id="but3" class="stop">( RESTART )</button>
        </div>
        <br>
        <div class="textareas">
          <textarea id="text1" rows="3" cols="20" wrap="hard" readonly></textarea>
          <textarea id="text2" rows="4" cols="20" wrap="hard" readonly></textarea>
        </div>
        <div class="block-button-1">
          <button class="pause" id="but5">PAUSE</button>
          <button class="resume" id="resumeButton">RESUME</button>
        </div>
      </div>
      <div>
        <dd>This is the original text</dd>
        <p id="text3"></p>
      </div>
    </form>
    <script src="./js/bundle.js"></script>
  </div>

  <script>
  function toggleUI() {
    const wrapper = document.querySelector('.wrapper');
    wrapper.classList.toggle('minimal-ui');
  }
</script>

<script>
  const voiceSelect = document.getElementById("voiceSelect");

  function populateVoiceList() {
    const voices = speechSynthesis.getVoices();

    // сохраняем текущий выбор, если есть
    const selected = voiceSelect.value;

    // очищаем список
    voiceSelect.innerHTML = "";

    voices.forEach((voice) => {
      const option = document.createElement("option");
      option.value = voice.name;
      option.textContent = `${voice.name} (${voice.lang})`;
      if (voice.default) {
        option.textContent += " — DEFAULT";
      }
      voiceSelect.appendChild(option);
    });

    // восстанавливаем выбор, если он есть в списке
    if (selected && [...voiceSelect.options].some(o => o.value === selected)) {
      voiceSelect.value = selected;
    }
  }

  // первый вызов
  populateVoiceList();

  // Edge и Chrome подгружают голоса асинхронно
  if (typeof speechSynthesis !== "undefined" && speechSynthesis.onvoiceschanged !== undefined) {
    speechSynthesis.onvoiceschanged = populateVoiceList;
  }
</script>


</body>

</html>